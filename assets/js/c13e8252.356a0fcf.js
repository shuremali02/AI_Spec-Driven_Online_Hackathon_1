"use strict";(globalThis.webpackChunkbook_write=globalThis.webpackChunkbook_write||[]).push([[632],{1725:(e,n,s)=>{s.d(n,{W6:()=>g});var r=s(6540),t=s(54),i=s(2851);const a={translateButton:"translateButton_ADJx",buttonIdle:"buttonIdle_aLV_",buttonLoading:"buttonLoading_ytEz",buttonSuccess:"buttonSuccess_yTAC",buttonError:"buttonError_QwRY",loadingSpinner:"loadingSpinner_alO8",spin:"spin_OT4R",buttonIcon:"buttonIcon_M0q7",errorMessage:"errorMessage_ZRzJ",retryLink:"retryLink_mGNU",urduContent:"urduContent_lpzr",urduText:"urduText_Ynf2",urduBadge:"urduBadge_bBo4",admonition:"admonition_oS0y",translationWrapper:"translationWrapper_w_rM",buttonContainer:"buttonContainer_gpy5",buttonWrapper:"buttonWrapper_URWB",toggleContainer:"toggleContainer_jqVS"};var o=s(4848);function l({content:e,className:n}){const s=e=>{const n=e.split(/(`[^`]+`)/g);return 1===n.length?e:n.map((e,n)=>e.startsWith("`")&&e.endsWith("`")?(0,o.jsx)("code",{style:{direction:"ltr",unicodeBidi:"isolate"},children:e.slice(1,-1)},n):e)};return(0,o.jsxs)("div",{className:`${a.urduContent} ${n||""}`,children:[(0,o.jsxs)("div",{className:a.urduBadge,children:[(0,o.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,o.jsx)("path",{d:"m5 8 6 6"}),(0,o.jsx)("path",{d:"m4 14 6-6 2-3"}),(0,o.jsx)("path",{d:"M2 5h12"}),(0,o.jsx)("path",{d:"M7 2h1"}),(0,o.jsx)("path",{d:"m22 22-5-10-5 10"}),(0,o.jsx)("path",{d:"M14 18h6"})]}),(0,o.jsx)("span",{children:"\u0627\u0631\u062f\u0648 \u062a\u0631\u062c\u0645\u06c1"})]}),(0,o.jsx)("div",{className:a.urduText,children:(e=>{const n=[];let r=0;return e.split(/(```[\s\S]*?```)/g).forEach(e=>{if(e.startsWith("```")&&e.endsWith("```")){const s=e.slice(3,-3),t=s.indexOf("\n"),i=t>0?s.slice(0,t).trim():"",a=t>0?s.slice(t+1):s;n.push((0,o.jsx)("pre",{style:{direction:"ltr",textAlign:"left"},children:(0,o.jsx)("code",{className:i?`language-${i}`:void 0,children:a})},r++))}else if(e.trim()){const t=e.split("\n");t.forEach((e,i)=>{if(e.trim()){const t=e.match(/^(#{1,6})\s+(.*)$/);if(t){const e=t[1].length,i=s(t[2]),a=`h${e}`;n.push((0,o.jsx)(a,{children:i},r++))}else if(e.match(/^[-*]\s+/)){const t=s(e.replace(/^[-*]\s+/,""));n.push((0,o.jsx)("li",{children:t},r++))}else if(e.match(/^\d+\.\s+/)){const t=s(e.replace(/^\d+\.\s+/,""));n.push((0,o.jsx)("li",{children:t},r++))}else n.push((0,o.jsx)("p",{children:s(e)},r++))}else i<t.length-1&&t[i+1]?.trim()})}}),n})(e)})]})}let c=function(e){return e.AUTH_REQUIRED="AUTH_REQUIRED",e.INVALID_REQUEST="INVALID_REQUEST",e.INVALID_CHAPTER_ID="INVALID_CHAPTER_ID",e.CONTENT_TOO_LONG="CONTENT_TOO_LONG",e.TRANSLATION_FAILED="TRANSLATION_FAILED",e.RATE_LIMITED="RATE_LIMITED",e.NETWORK_ERROR="NETWORK_ERROR",e.TIMEOUT="TIMEOUT",e}({});const d={[c.AUTH_REQUIRED]:"Please sign in to translate content.",[c.INVALID_REQUEST]:"Translation request was invalid. Please try again.",[c.INVALID_CHAPTER_ID]:"Chapter not found.",[c.CONTENT_TOO_LONG]:"Chapter is too long to translate at once.",[c.TRANSLATION_FAILED]:"Translation failed. Please try again.",[c.RATE_LIMITED]:"Too many translation requests. Please wait and try again.",[c.NETWORK_ERROR]:"Connection error. Check your internet connection.",[c.TIMEOUT]:"Translation timed out. Please try again."},h={TRANSLATE:"Translate to Urdu",TRANSLATE_URDU:"\u0627\u0631\u062f\u0648 \u0645\u06cc\u06ba \u062a\u0631\u062c\u0645\u06c1 \u06a9\u0631\u06cc\u06ba",LOADING:"Translating...",SHOW_ORIGINAL:"Show Original",SHOW_ORIGINAL_URDU:"\u0627\u0635\u0644 \u0645\u0648\u0627\u062f \u062f\u06a9\u06be\u0627\u0626\u06cc\u06ba",RETRY:"Retry Translation"},u={ENDPOINT:"/api/translate",TIMEOUT_MS:12e4,MAX_CONTENT_LENGTH:1e5};var p=s(961);function g({chapterId:e}){const{user:n,isLoading:s}=(0,t.As)(),[c,g]=(0,r.useState)(""),m=(0,r.useRef)([]),[b,x]=(0,r.useState)(!1),[f,_]=(0,r.useState)({status:"idle",translatedContent:null,showTranslated:!1,errorMessage:null});(0,r.useEffect)(()=>{const e=setTimeout(()=>{const e=document.querySelector("article");if(e){const n=y(e);g(n)}},500);return()=>clearTimeout(e)},[]);const y=e=>{let n="";const s=e=>{if(e.nodeType===Node.TEXT_NODE)n+=e.textContent;else if(e.nodeType===Node.ELEMENT_NODE){const r=e,t=r.tagName.toLowerCase();if(r.classList.contains("translateButton")||r.closest('[class*="translateButton"]'))return;if("h1"===t)n+="\n# ";else if("h2"===t)n+="\n## ";else if("h3"===t)n+="\n### ";else if("h4"===t)n+="\n#### ";else if("p"===t)n+="\n\n";else if("li"===t)n+="\n* ";else{if("pre"===t||"code"===t)return void(n+="\n```\n"+r.textContent+"\n```\n");"br"===t&&(n+="\n")}r.childNodes.forEach(s),["h1","h2","h3","h4","p","div","ul","ol"].includes(t)&&(n+="\n")}};return s(e),n.trim()},j=(0,r.useCallback)(async()=>{const n=document.querySelector(".table-of-contents");if(!n)return;const s=n.querySelectorAll("a");if(0===s.length)return;0===m.current.length&&s.forEach(e=>{m.current.push({element:e,originalText:e.textContent||""})});const r=m.current.map(e=>e.originalText).join("\n");try{const s=await fetch(`${i.tx}${u.ENDPOINT}`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({chapter_id:`${e}-toc`,content:r})}),t=await s.json();if(t.success&&t.translated_content){const e=t.translated_content.split("\n");m.current.forEach((n,s)=>{e[s]&&(n.element.textContent=e[s],n.element.style.fontFamily="'Noto Nastaliq Urdu', 'Jameel Noori Nastaleeq', serif",n.element.style.direction="rtl")}),n.style.direction="rtl",n.style.textAlign="right",x(!0)}}catch(t){console.error("[TOC Translation] Error:",t)}},[e]),k=(0,r.useCallback)(()=>{const e=document.querySelector(".table-of-contents");m.current.forEach(e=>{e.element.textContent=e.originalText,e.element.style.fontFamily="",e.element.style.direction=""}),e&&(e.style.direction="",e.style.textAlign=""),x(!1)},[]),v=(0,r.useCallback)(async()=>{if(f.translatedContent){const e=!f.showTranslated;return _(n=>({...n,showTranslated:e})),void(e&&!b?j():!e&&b&&k())}if(c){_(e=>({...e,status:"loading",errorMessage:null}));try{const n=new AbortController,s=setTimeout(()=>n.abort(),12e4),r=await fetch(`${i.tx}${u.ENDPOINT}`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({chapter_id:e,content:c}),signal:n.signal});clearTimeout(s);const t=await r.json();if(t.success)_({status:"success",translatedContent:t.translated_content,showTranslated:!0,errorMessage:null}),j();else{const e=t.error,n=d[e]||t.message||"Translation failed";_(e=>({...e,status:"error",errorMessage:n}))}}catch(n){let e=d.TRANSLATION_FAILED;n instanceof Error&&("AbortError"===n.name?e=d.TIMEOUT:(n.message.includes("fetch")||n.message.includes("network"))&&(e=d.NETWORK_ERROR)),_(n=>({...n,status:"error",errorMessage:e}))}}else _(e=>({...e,status:"error",errorMessage:"Chapter content not found. Please refresh the page."}))},[e,c,f.translatedContent,f.showTranslated,b,j,k]),S=(0,r.useCallback)(()=>{_({status:"idle",translatedContent:null,showTranslated:!1,errorMessage:null}),k()},[k]);if((0,r.useEffect)(()=>{"idle"===f.status&&f.translatedContent},[f.status,f.translatedContent,c]),s)return null;if(!n)return null;const{status:w,showTranslated:T,errorMessage:N}=f,C="loading"===w;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("button",{type:"button",className:`${a.translateButton} ${(()=>{switch(w){case"loading":return a.buttonLoading;case"success":return T?a.buttonSuccess:a.buttonIdle;case"error":return a.buttonError;default:return a.buttonIdle}})()}`,onClick:v,disabled:C,"aria-label":T?"Show original English content":"Translate content to Urdu","aria-busy":"loading"===w,children:["loading"===w?(0,o.jsx)("span",{className:a.loadingSpinner,"aria-hidden":"true"}):(0,o.jsxs)("svg",{className:a.buttonIcon,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,o.jsx)("path",{d:"m5 8 6 6"}),(0,o.jsx)("path",{d:"m4 14 6-6 2-3"}),(0,o.jsx)("path",{d:"M2 5h12"}),(0,o.jsx)("path",{d:"M7 2h1"}),(0,o.jsx)("path",{d:"m22 22-5-10-5 10"}),(0,o.jsx)("path",{d:"M14 18h6"})]}),(0,o.jsx)("span",{children:"loading"===w?h.LOADING:"error"===w?h.RETRY:T?h.SHOW_ORIGINAL:h.TRANSLATE})]}),"error"===w&&N&&(0,o.jsxs)("div",{className:a.errorMessage,role:"alert",children:[(0,o.jsx)("span",{children:N}),(0,o.jsx)("button",{type:"button",className:a.retryLink,onClick:S,"aria-label":"Retry translation",children:"Try again"})]}),T&&f.translatedContent&&"undefined"!=typeof document&&(()=>{const e=document.querySelector("article"),n=e?.querySelector('div[style*="flex"]');if(n){let e=document.getElementById("urdu-content-portal");return e||(e=document.createElement("div"),e.id="urdu-content-portal",e.style.cssText="direction: ltr; width: 100%; max-width: 100%;",n.insertAdjacentElement("afterend",e)),(0,p.createPortal)((0,o.jsx)(l,{content:f.translatedContent}),e)}return null})()]})}},6473:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>p,frontMatter:()=>l,metadata:()=>r,toc:()=>h});const r=JSON.parse('{"id":"module-1/chapter-03-first-nodes","title":"Chapter 3: Building Your First ROS 2 Nodes","description":"Learn to create your first ROS 2 publisher and subscriber nodes using Python (rclpy). Build complete working examples with proper structure and debugging techniques.","source":"@site/docs/module-1/chapter-03-first-nodes.md","sourceDirName":"module-1","slug":"/module-1/chapter-03-first-nodes","permalink":"/docs/module-1/chapter-03-first-nodes","draft":false,"unlisted":false,"editUrl":"https://github.com/shuremali02/AI_Spec-Driven_Online_Hackathon_1/docs/module-1/chapter-03-first-nodes.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"id":"chapter-03-first-nodes","title":"Chapter 3: Building Your First ROS 2 Nodes","sidebar_position":3,"sidebar_label":"Chapter 3: Building Your First ROS 2 Nodes","description":"Learn to create your first ROS 2 publisher and subscriber nodes using Python (rclpy). Build complete working examples with proper structure and debugging techniques.","keywords":["ROS 2","publisher","subscriber","rclpy","Python","nodes","topics","communication"]},"sidebar":"tutorialSidebar","previous":{"title":"Chapter 2: ROS 2 Architecture","permalink":"/docs/module-1/chapter-02-ros2-architecture"},"next":{"title":"Chapter 4: URDF Robot Descriptions","permalink":"/docs/module-1/chapter-04-urdf"}}');var t=s(4848),i=s(8453),a=s(1725),o=s(8955);const l={id:"chapter-03-first-nodes",title:"Chapter 3: Building Your First ROS 2 Nodes",sidebar_position:3,sidebar_label:"Chapter 3: Building Your First ROS 2 Nodes",description:"Learn to create your first ROS 2 publisher and subscriber nodes using Python (rclpy). Build complete working examples with proper structure and debugging techniques.",keywords:["ROS 2","publisher","subscriber","rclpy","Python","nodes","topics","communication"]},c="Chapter 3: Building Your First ROS 2 Nodes",d={},h=[{value:"Introduction",id:"introduction",level:2},{value:"What You&#39;ll Build",id:"what-youll-build",level:3},{value:"Why This Matters",id:"why-this-matters",level:3},{value:"Chapter Roadmap",id:"chapter-roadmap",level:3},{value:"ROS 2 Workspace and Package Setup",id:"ros-2-workspace-and-package-setup",level:2},{value:"Creating a ROS 2 Workspace Directory Structure",id:"creating-a-ros-2-workspace-directory-structure",level:3},{value:"Using ros2 pkg create Command",id:"using-ros2-pkg-create-command",level:3},{value:"Understanding package.xml",id:"understanding-packagexml",level:3},{value:"Understanding setup.py",id:"understanding-setuppy",level:3},{value:"Package Directory Structure Breakdown",id:"package-directory-structure-breakdown",level:3},{value:"Setting Up Python Entry Points for Executables",id:"setting-up-python-entry-points-for-executables",level:3},{value:"Complete Package Setup Example",id:"complete-package-setup-example",level:3},{value:"Your First Publisher Node",id:"your-first-publisher-node",level:2},{value:"Understanding the Node Class and Initialization",id:"understanding-the-node-class-and-initialization",level:3},{value:"Creating Publishers with create_publisher()",id:"creating-publishers-with-create_publisher",level:3},{value:"Implementing Timer Callbacks for Periodic Publishing",id:"implementing-timer-callbacks-for-periodic-publishing",level:3},{value:"Message Types and Importing std_msgs",id:"message-types-and-importing-std_msgs",level:3},{value:"Complete Publisher Code Example",id:"complete-publisher-code-example",level:3},{value:"Adding Logging and Proper Shutdown Handling",id:"adding-logging-and-proper-shutdown-handling",level:3},{value:"Running the Publisher Node",id:"running-the-publisher-node",level:3},{value:"Enhanced Publisher with Better Error Handling",id:"enhanced-publisher-with-better-error-handling",level:3},{value:"Your First Subscriber Node",id:"your-first-subscriber-node",level:2},{value:"Understanding Subscription Callbacks",id:"understanding-subscription-callbacks",level:3},{value:"Creating Subscribers with create_subscription()",id:"creating-subscribers-with-create_subscription",level:3},{value:"Processing Received Messages",id:"processing-received-messages",level:3},{value:"Complete Subscriber Code Example",id:"complete-subscriber-code-example",level:3},{value:"Running Publisher and Subscriber Together",id:"running-publisher-and-subscriber-together",level:3},{value:"Advanced Subscriber with Multiple Topic Handling",id:"advanced-subscriber-with-multiple-topic-handling",level:3},{value:"Debugging and Troubleshooting",id:"debugging-and-troubleshooting",level:2},{value:"Common Errors and Their Solutions",id:"common-errors-and-their-solutions",level:3},{value:"1. Node Not Found Error",id:"1-node-not-found-error",level:4},{value:"2. Topic Communication Issues",id:"2-topic-communication-issues",level:4},{value:"3. Import Errors",id:"3-import-errors",level:4},{value:"Using ros2 topic Commands",id:"using-ros2-topic-commands",level:3},{value:"Check Available Topics",id:"check-available-topics",level:4},{value:"Echo Messages on a Topic",id:"echo-messages-on-a-topic",level:4},{value:"Check Topic Information",id:"check-topic-information",level:4},{value:"Publish Messages Manually",id:"publish-messages-manually",level:4},{value:"Using ros2 node Commands",id:"using-ros2-node-commands",level:3},{value:"List Running Nodes",id:"list-running-nodes",level:4},{value:"Get Node Information",id:"get-node-information",level:4},{value:"Topic Introspection Tools",id:"topic-introspection-tools",level:3},{value:"Check Topic Type",id:"check-topic-type",level:4},{value:"Get Topic Endpoint Information",id:"get-topic-endpoint-information",level:4},{value:"Troubleshooting Connection Issues",id:"troubleshooting-connection-issues",level:3},{value:"Network Communication Problems",id:"network-communication-problems",level:4},{value:"Permission Issues",id:"permission-issues",level:4},{value:"Debugging Code Examples",id:"debugging-code-examples",level:3},{value:"Adding Debug Logging",id:"adding-debug-logging",level:4},{value:"Checking Node Status",id:"checking-node-status",level:4},{value:"Message Validation",id:"message-validation",level:4},{value:"Common Debugging Workflow",id:"common-debugging-workflow",level:3},{value:"Chapter Summary and Next Steps",id:"chapter-summary-and-next-steps",level:2},{value:"Key Takeaways",id:"key-takeaways",level:3},{value:"What You Can Do Now",id:"what-you-can-do-now",level:3},{value:"Preview of Next Chapter",id:"preview-of-next-chapter",level:3},{value:"Additional Resources for Practice",id:"additional-resources-for-practice",level:3},{value:"Practice Projects",id:"practice-projects",level:3}];function u(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"chapter-3-building-your-first-ros-2-nodes",children:"Chapter 3: Building Your First ROS 2 Nodes"})}),"\n",(0,t.jsxs)("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap",marginBottom:"1.5rem"},children:[(0,t.jsx)(a.W6,{chapterId:"module-1/chapter-03-first-nodes"}),(0,t.jsx)(o.KF,{chapterId:"module-1/chapter-03-first-nodes"})]}),"\n",(0,t.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,t.jsx)(n.p,{children:"Congratulations! You've learned the theoretical foundations of ROS 2 in the previous chapters. Now it's time to put that knowledge into practice and build your first ROS 2 nodes using Python. This chapter will guide you through creating publisher and subscriber nodes from scratch, helping you understand the practical implementation of the ROS 2 communication patterns you learned about."}),"\n",(0,t.jsx)(n.p,{children:"In this chapter, you'll build a complete publisher-subscriber system that demonstrates the fundamental communication pattern in ROS 2. By the end of this chapter, you'll have a solid understanding of how to create ROS 2 packages, implement nodes that communicate through topics, and run your own ROS 2 applications."}),"\n",(0,t.jsx)(n.h3,{id:"what-youll-build",children:"What You'll Build"}),"\n",(0,t.jsx)(n.p,{children:"You'll create a simple but complete ROS 2 system consisting of:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"A publisher node that sends messages containing sensor data"}),"\n",(0,t.jsx)(n.li,{children:"A subscriber node that receives and processes these messages"}),"\n",(0,t.jsx)(n.li,{children:"Proper package structure following ROS 2 conventions"}),"\n",(0,t.jsx)(n.li,{children:"Working examples that demonstrate real node-to-node communication"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"why-this-matters",children:"Why This Matters"}),"\n",(0,t.jsx)(n.p,{children:"Understanding how to create ROS 2 nodes is fundamental to robot development. Every robot system relies on nodes communicating with each other through topics, services, and actions. Mastering the publisher-subscriber pattern gives you the foundation needed to build complex robot applications, from simple sensor data processing to sophisticated control systems."}),"\n",(0,t.jsx)(n.h3,{id:"chapter-roadmap",children:"Chapter Roadmap"}),"\n",(0,t.jsx)(n.p,{children:"This chapter is structured to take you from basic workspace setup to complete node implementation:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Workspace and Package Setup"}),": Learn to create proper ROS 2 package structures"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Your First Publisher Node"}),": Build a node that publishes messages on a timer"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Your First Subscriber Node"}),": Create a node that receives and processes messages"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Debugging and Troubleshooting"}),": Master techniques to identify and fix common issues"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Chapter Summary"}),": Review key concepts and prepare for the next chapter"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"ros-2-workspace-and-package-setup",children:"ROS 2 Workspace and Package Setup"}),"\n",(0,t.jsx)(n.p,{children:"Before creating your first ROS 2 nodes, you need to understand the workspace structure and how to create properly structured packages. A ROS 2 workspace is simply a directory that contains ROS 2 packages, and each package follows a specific structure that allows ROS 2 tools to build and run your code."}),"\n",(0,t.jsx)(n.h3,{id:"creating-a-ros-2-workspace-directory-structure",children:"Creating a ROS 2 Workspace Directory Structure"}),"\n",(0,t.jsx)(n.p,{children:"ROS 2 workspaces follow a standard structure that makes it easy to manage multiple packages. The typical workspace structure looks like this:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"my_workspace/\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 package_1/\n\u2502   \u251c\u2500\u2500 package_2/\n\u2502   \u2514\u2500\u2500 ...\n\u251c\u2500\u2500 build/\n\u251c\u2500\u2500 install/\n\u2514\u2500\u2500 log/\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"src/"})," directory contains your source code packages, while ",(0,t.jsx)(n.code,{children:"build/"}),", ",(0,t.jsx)(n.code,{children:"install/"}),", and ",(0,t.jsx)(n.code,{children:"log/"})," are created automatically when you build your workspace."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-mermaid",children:'graph TD\n    subgraph "ROS 2 Workspace Structure"\n        WS[my_workspace/]\n        SRC[src/]\n        BUILD[build/]\n        INSTALL[install/]\n        LOG[log/]\n\n        WS --\x3e SRC\n        WS --\x3e BUILD\n        WS --\x3e INSTALL\n        WS --\x3e LOG\n\n        PKG1[package_1/]\n        PKG2[package_2/]\n\n        SRC --\x3e PKG1\n        SRC --\x3e PKG2\n    end\n\n    style WS fill:#667eea,color:#fff\n    style SRC fill:#10b981,color:#fff\n    style BUILD fill:#f59e0b,color:#fff\n    style INSTALL fill:#f59e0b,color:#fff\n    style LOG fill:#f59e0b,color:#fff\n    style PKG1 fill:#8b5cf6,color:#fff\n    style PKG2 fill:#8b5cf6,color:#fff\n'})}),"\n",(0,t.jsx)(n.admonition,{title:"Directory Purposes",type:"tip",children:(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"src/"}),": Your source code (you edit this)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"build/"}),": Compilation artifacts (auto-generated)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"install/"}),": Installed packages (auto-generated)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"log/"}),": Build logs (auto-generated)"]}),"\n"]})}),"\n",(0,t.jsx)(n.p,{children:"Let's create a new workspace for our learning projects:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Create a new directory for our workspace\nmkdir -p ~/ros2_workspace/src\ncd ~/ros2_workspace\n"})}),"\n",(0,t.jsx)(n.h3,{id:"using-ros2-pkg-create-command",children:"Using ros2 pkg create Command"}),"\n",(0,t.jsxs)(n.p,{children:["ROS 2 provides a convenient command-line tool to create new packages with the proper structure. For Python packages, we'll use the ",(0,t.jsx)(n.code,{children:"ament_python"})," build type, which is designed specifically for Python-based ROS 2 packages."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_workspace/src\nros2 pkg create --build-type ament_python my_first_ros2_pkg\n"})}),"\n",(0,t.jsxs)(n.p,{children:["This command creates a new package named ",(0,t.jsx)(n.code,{children:"my_first_ros2_pkg"})," with the following structure:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"my_first_ros2_pkg/\n\u251c\u2500\u2500 my_first_ros2_pkg/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2514\u2500\u2500 publisher_member_function.py\n\u251c\u2500\u2500 package.xml\n\u251c\u2500\u2500 setup.cfg\n\u251c\u2500\u2500 setup.py\n\u2514\u2500\u2500 test/\n    \u251c\u2500\u2500 __init__.py\n    \u2514\u2500\u2500 test_copyright.py\n    \u2514\u2500\u2500 test_flake8.py\n    \u2514\u2500\u2500 test_pep257.py\n"})}),"\n",(0,t.jsx)(n.h3,{id:"understanding-packagexml",children:"Understanding package.xml"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"package.xml"})," file contains metadata about your package, including its name, version, maintainers, dependencies, and other important information. Here's what a typical ",(0,t.jsx)(n.code,{children:"package.xml"})," looks like for a Python package:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<?xml-model href="http://download.ros.org/schema/package_format3.xsd" schematypens="http://www.w3.org/2001/XMLSchema"?>\n<package format="3">\n  <name>my_first_ros2_pkg</name>\n  <version>0.0.0</version>\n  <description>TODO: Package description</description>\n  <maintainer email="user@todo.todo">user</maintainer>\n  <license>TODO: License declaration</license>\n\n  <test_depend>ament_copyright</test_depend>\n  <test_depend>ament_flake8</test_depend>\n  <test_depend>ament_pep257</test_depend>\n  <test_depend>python3-pytest</test_depend>\n\n  <export>\n    <build_type>ament_python</build_type>\n  </export>\n</package>\n'})}),"\n",(0,t.jsxs)(n.p,{children:["This file is crucial because it tells the ROS 2 build system what dependencies your package needs and how to build it. For Python packages, the key line is ",(0,t.jsx)(n.code,{children:"<build_type>ament_python</build_type>"}),", which specifies that this package should be built using the Python build system."]}),"\n",(0,t.jsx)(n.h3,{id:"understanding-setuppy",children:"Understanding setup.py"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"setup.py"})," file is the Python equivalent of a build configuration file. It defines how your Python package should be installed and what executables should be created. Here's the default ",(0,t.jsx)(n.code,{children:"setup.py"})," created by the ",(0,t.jsx)(n.code,{children:"ros2 pkg create"})," command:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"from setuptools import setup\n\npackage_name = 'my_first_ros2_pkg'\n\nsetup(\n    name=package_name,\n    version='0.0.0',\n    packages=[package_name],\n    data_files=[\n        ('share/ament_index/resource_index/packages',\n            ['resource/' + package_name]),\n        ('share/' + package_name, ['package.xml']),\n    ],\n    install_requires=['setuptools'],\n    zip_safe=True,\n    maintainer='user',\n    maintainer_email='user@todo.todo',\n    description='TODO: Package description',\n    license='TODO: License declaration',\n    tests_require=['pytest'],\n    entry_points={\n        'console_scripts': [\n        ],\n    },\n)\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The most important part of this file for our purposes is the ",(0,t.jsx)(n.code,{children:"entry_points"})," section, which defines the executable scripts that will be created when the package is installed. This is where you'll add your node scripts so they can be run with the ",(0,t.jsx)(n.code,{children:"ros2 run"})," command."]}),"\n",(0,t.jsx)(n.h3,{id:"package-directory-structure-breakdown",children:"Package Directory Structure Breakdown"}),"\n",(0,t.jsx)(n.p,{children:"Let's examine each part of the package structure:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsxs)(n.strong,{children:["Top-level directory (",(0,t.jsx)(n.code,{children:"my_first_ros2_pkg/"}),")"]}),": Contains all package files"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsxs)(n.strong,{children:["Python package directory (",(0,t.jsx)(n.code,{children:"my_first_ros2_pkg/"}),")"]}),": Contains the actual Python code"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"__init__.py"})}),": Makes the directory a Python package"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"package.xml"})}),": Package metadata and dependencies"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"setup.py"})}),": Python build configuration"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"setup.cfg"})}),": Additional Python packaging configuration"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"test/"})}),": Unit tests for your package"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"setting-up-python-entry-points-for-executables",children:"Setting Up Python Entry Points for Executables"}),"\n",(0,t.jsxs)(n.p,{children:["To make your ROS 2 nodes executable, you need to add them to the ",(0,t.jsx)(n.code,{children:"entry_points"})," section in ",(0,t.jsx)(n.code,{children:"setup.py"}),". This tells ROS 2 which Python scripts should be treated as executable commands."]}),"\n",(0,t.jsxs)(n.p,{children:["For example, if you want to create a publisher node called ",(0,t.jsx)(n.code,{children:"talker"}),", you would add it to the console scripts section:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"entry_points={\n    'console_scripts': [\n        'talker = my_first_ros2_pkg.publisher_member_function:main',\n    ],\n},\n"})}),"\n",(0,t.jsxs)(n.p,{children:["This creates an executable command called ",(0,t.jsx)(n.code,{children:"talker"})," that runs the ",(0,t.jsx)(n.code,{children:"main"})," function from the ",(0,t.jsx)(n.code,{children:"publisher_member_function"})," module in the ",(0,t.jsx)(n.code,{children:"my_first_ros2_pkg"})," package."]}),"\n",(0,t.jsx)(n.h3,{id:"complete-package-setup-example",children:"Complete Package Setup Example"}),"\n",(0,t.jsx)(n.p,{children:"Here's a complete example of setting up a basic ROS 2 Python package:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"First, create the workspace and package:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"mkdir -p ~/ros2_workspace/src\ncd ~/ros2_workspace/src\nros2 pkg create --build-type ament_python my_first_ros2_pkg\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsxs)(n.li,{children:["Edit the ",(0,t.jsx)(n.code,{children:"package.xml"})," to add proper metadata:"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<?xml-model href="http://download.ros.org/schema/package_format3.xsd" schematypens="http://www.w3.org/2001/XMLSchema"?>\n<package format="3">\n  <name>my_first_ros2_pkg</name>\n  <version>0.1.0</version>\n  <description>My first ROS 2 package with publisher and subscriber nodes</description>\n  <maintainer email="student@university.edu">Student Name</maintainer>\n  <license>Apache License 2.0</license>\n\n  <depend>rclpy</depend>\n  <depend>std_msgs</depend>\n\n  <test_depend>ament_copyright</test_depend>\n  <test_depend>ament_flake8</test_depend>\n  <test_depend>ament_pep257</test_depend>\n  <test_depend>python3-pytest</test_depend>\n\n  <export>\n    <build_type>ament_python</build_type>\n  </export>\n</package>\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Notice that we've added ",(0,t.jsx)(n.code,{children:"<depend>rclpy</depend>"})," and ",(0,t.jsx)(n.code,{children:"<depend>std_msgs</depend>"})," to specify that our package depends on the ROS 2 Python client library and standard message types."]}),"\n",(0,t.jsxs)(n.ol,{start:"3",children:["\n",(0,t.jsxs)(n.li,{children:["Update the ",(0,t.jsx)(n.code,{children:"setup.py"})," file to include your nodes:"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"from setuptools import setup\n\npackage_name = 'my_first_ros2_pkg'\n\nsetup(\n    name=package_name,\n    version='0.1.0',\n    packages=[package_name],\n    data_files=[\n        ('share/ament_index/resource_index/packages',\n            ['resource/' + package_name]),\n        ('share/' + package_name, ['package.xml']),\n    ],\n    install_requires=['setuptools'],\n    zip_safe=True,\n    maintainer='Student Name',\n    maintainer_email='student@university.edu',\n    description='My first ROS 2 package with publisher and subscriber nodes',\n    license='Apache License 2.0',\n    tests_require=['pytest'],\n    entry_points={\n        'console_scripts': [\n            'talker = my_first_ros2_pkg.publisher_member_function:main',\n            'listener = my_first_ros2_pkg.subscriber_member_function:main',\n        ],\n    },\n)\n"})}),"\n",(0,t.jsx)(n.p,{children:"With this setup, you'll be able to run your nodes using:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"ros2 run my_first_ros2_pkg talker\nros2 run my_first_ros2_pkg listener\n"})}),"\n",(0,t.jsx)(n.h2,{id:"your-first-publisher-node",children:"Your First Publisher Node"}),"\n",(0,t.jsx)(n.p,{children:"Now let's create your first publisher node. A publisher node creates and sends messages to a topic that other nodes can subscribe to. We'll start with a simple example that publishes string messages on a timer."}),"\n",(0,t.jsx)(n.h3,{id:"understanding-the-node-class-and-initialization",children:"Understanding the Node Class and Initialization"}),"\n",(0,t.jsxs)(n.p,{children:["Every ROS 2 node in Python inherits from the ",(0,t.jsx)(n.code,{children:"Node"})," class provided by the ",(0,t.jsx)(n.code,{children:"rclpy"})," library. The ",(0,t.jsx)(n.code,{children:"Node"})," class handles the ROS 2 communication infrastructure, allowing you to focus on your application logic."]}),"\n",(0,t.jsx)(n.p,{children:"Here's the basic structure of a ROS 2 publisher node:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\n\nclass MinimalPublisher(Node):\n\n    def __init__(self):\n        super().__init__('minimal_publisher')\n        self.publisher_ = self.create_publisher(String, 'topic', 10)\n        timer_period = 0.5  # seconds\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n        self.i = 0\n\n    def timer_callback(self):\n        msg = String()\n        msg.data = 'Hello World: %d' % self.i\n        self.publisher_.publish(msg)\n        self.get_logger().info('Publishing: \"%s\"' % msg.data)\n        self.i += 1\n\n\ndef main(args=None):\n    rclpy.init(args=args)\n\n    minimal_publisher = MinimalPublisher()\n\n    rclpy.spin(minimal_publisher)\n\n    minimal_publisher.destroy_node()\n    rclpy.shutdown()\n\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,t.jsx)(n.h3,{id:"creating-publishers-with-create_publisher",children:"Creating Publishers with create_publisher()"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"create_publisher()"})," method is how you create a publisher within your node. It takes three main parameters:"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Message type"}),": The type of message to publish (e.g., ",(0,t.jsx)(n.code,{children:"String"}),", ",(0,t.jsx)(n.code,{children:"Int32"}),", ",(0,t.jsx)(n.code,{children:"Float64"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Topic name"}),": The name of the topic to publish to (e.g., ",(0,t.jsx)(n.code,{children:"'topic'"}),", ",(0,t.jsx)(n.code,{children:"'sensor_data'"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Queue size"}),": The size of the message queue for this publisher (typically 10)"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"self.publisher_ = self.create_publisher(String, 'topic', 10)\n"})}),"\n",(0,t.jsxs)(n.p,{children:["This creates a publisher that sends ",(0,t.jsx)(n.code,{children:"String"})," messages to the topic named ",(0,t.jsx)(n.code,{children:"'topic'"})," with a queue size of 10 messages."]}),"\n",(0,t.jsx)(n.h3,{id:"implementing-timer-callbacks-for-periodic-publishing",children:"Implementing Timer Callbacks for Periodic Publishing"}),"\n",(0,t.jsxs)(n.p,{children:["To publish messages periodically, we use ROS 2's timer functionality. The ",(0,t.jsx)(n.code,{children:"create_timer()"})," method creates a timer that calls a specified callback function at regular intervals:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"timer_period = 0.5  # seconds\nself.timer = self.create_timer(timer_period, self.timer_callback)\n"})}),"\n",(0,t.jsxs)(n.p,{children:["This creates a timer that calls ",(0,t.jsx)(n.code,{children:"self.timer_callback"})," every 0.5 seconds (500 milliseconds)."]}),"\n",(0,t.jsx)(n.h3,{id:"message-types-and-importing-std_msgs",children:"Message Types and Importing std_msgs"}),"\n",(0,t.jsxs)(n.p,{children:["ROS 2 provides a variety of standard message types in the ",(0,t.jsx)(n.code,{children:"std_msgs"})," package. For our simple example, we're using the ",(0,t.jsx)(n.code,{children:"String"})," message type, but there are many others available:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"std_msgs.msg.String"})," - For string data"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"std_msgs.msg.Int32"})," - For 32-bit integer data"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"std_msgs.msg.Float64"})," - For 64-bit floating-point data"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"std_msgs.msg.Bool"})," - For boolean data"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"std_msgs.msg.Header"})," - For timestamp and frame information"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"To use these message types, you need to import them:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"from std_msgs.msg import String\n"})}),"\n",(0,t.jsx)(n.h3,{id:"complete-publisher-code-example",children:"Complete Publisher Code Example"}),"\n",(0,t.jsxs)(n.p,{children:["Let's create a complete publisher node that publishes sensor data. Create the file ",(0,t.jsx)(n.code,{children:"~/ros2_workspace/src/my_first_ros2_pkg/my_first_ros2_pkg/publisher_member_function.py"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'#!/usr/bin/env python3\n"""\nPublisher Node Example\n\nThis node demonstrates how to create a publisher that sends messages\nto a topic at regular intervals. It simulates sensor data publishing\nwhich is a common pattern in robotics applications.\n"""\n\nimport rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\n\nclass SensorPublisher(Node):\n    """\n    A ROS 2 publisher node that simulates sensor data publishing.\n\n    This node publishes simulated sensor readings to a topic called \'sensor_data\'\n    at regular intervals. The data includes a timestamp and simulated values\n    that could represent various sensor readings from a robot.\n    """\n\n    def __init__(self):\n        """\n        Initialize the publisher node.\n\n        Creates a publisher, timer, and initializes counter variables.\n        """\n        # Call the parent class constructor and give the node a name\n        super().__init__(\'sensor_publisher\')\n\n        # Create a publisher that sends String messages to the \'sensor_data\' topic\n        # The queue size of 10 means up to 10 messages can be queued before dropping old ones\n        self.publisher_ = self.create_publisher(String, \'sensor_data\', 10)\n\n        # Set the timer period to 0.5 seconds (500 milliseconds)\n        timer_period = 0.5  # seconds\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n\n        # Initialize a counter to create unique messages\n        self.i = 0\n\n        # Log a message indicating the node has started\n        self.get_logger().info(\'Sensor Publisher node initialized\')\n\n    def timer_callback(self):\n        """\n        Callback function that runs every timer period.\n\n        Creates a message, publishes it, and logs the action.\n        """\n        # Create a new String message\n        msg = String()\n\n        # Populate the message with simulated sensor data\n        msg.data = f\'Sensor Reading {self.i}: Temperature=23.5\xb0C, Humidity=45.2%, Pressure=1013.25 hPa\'\n\n        # Publish the message to the topic\n        self.publisher_.publish(msg)\n\n        # Log the published message for debugging purposes\n        self.get_logger().info(f\'Publishing: "{msg.data}"\')\n\n        # Increment the counter for the next message\n        self.i += 1\n\n\ndef main(args=None):\n    """\n    Main function to run the publisher node.\n\n    Initializes the ROS 2 communication, creates the publisher node,\n    runs it until interrupted, and properly shuts down.\n    """\n    # Initialize the ROS 2 communication\n    rclpy.init(args=args)\n\n    # Create the publisher node\n    sensor_publisher = SensorPublisher()\n\n    try:\n        # Keep the node running until interrupted (Ctrl+C)\n        rclpy.spin(sensor_publisher)\n    except KeyboardInterrupt:\n        # Handle graceful shutdown when Ctrl+C is pressed\n        sensor_publisher.get_logger().info(\'Interrupted by user, shutting down...\')\n    finally:\n        # Clean up resources\n        sensor_publisher.destroy_node()\n        rclpy.shutdown()\n\n\nif __name__ == \'__main__\':\n    main()\n'})}),"\n",(0,t.jsx)(n.h3,{id:"adding-logging-and-proper-shutdown-handling",children:"Adding Logging and Proper Shutdown Handling"}),"\n",(0,t.jsxs)(n.p,{children:["Proper logging is essential for debugging ROS 2 nodes. The ",(0,t.jsx)(n.code,{children:"get_logger().info()"})," method allows you to log messages that appear in the terminal when the node runs:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"self.get_logger().info('Publishing: \"%s\"' % msg.data)\n"})}),"\n",(0,t.jsx)(n.p,{children:"For proper shutdown handling, it's important to clean up resources when the node exits:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"try:\n    rclpy.spin(sensor_publisher)\nexcept KeyboardInterrupt:\n    sensor_publisher.get_logger().info('Interrupted by user, shutting down...')\nfinally:\n    sensor_publisher.destroy_node()\n    rclpy.shutdown()\n"})}),"\n",(0,t.jsx)(n.h3,{id:"running-the-publisher-node",children:"Running the Publisher Node"}),"\n",(0,t.jsx)(n.p,{children:"To run your publisher node, first build your workspace:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_workspace\ncolcon build --packages-select my_first_ros2_pkg\nsource install/setup.bash\n"})}),"\n",(0,t.jsx)(n.p,{children:"Then run the publisher:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"ros2 run my_first_ros2_pkg talker\n"})}),"\n",(0,t.jsx)(n.p,{children:"You should see output like:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'[INFO] [1699123456.789012]: Sensor Publisher node initialized\n[INFO] [1699123457.289012]: Publishing: "Sensor Reading 0: Temperature=23.5\xb0C, Humidity=45.2%, Pressure=1013.25 hPa"\n[INFO] [1699123457.789012]: Publishing: "Sensor Reading 1: Temperature=23.5\xb0C, Humidity=45.2%, Pressure=1013.25 hPa"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"enhanced-publisher-with-better-error-handling",children:"Enhanced Publisher with Better Error Handling"}),"\n",(0,t.jsx)(n.p,{children:"Let's create a more robust publisher with better error handling and configuration options:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\n\"\"\"\nEnhanced Publisher Node\n\nThis node demonstrates advanced publisher features including\nconfiguration parameters, error handling, and more sophisticated\nmessage publishing patterns.\n\"\"\"\n\nimport rclpy\nfrom rclpy.node import Node\nfrom rclpy.qos import QoSProfile, ReliabilityPolicy, HistoryPolicy\nfrom std_msgs.msg import String\n\n\nclass EnhancedPublisher(Node):\n    \"\"\"\n    An enhanced ROS 2 publisher with configurable parameters and error handling.\n    \"\"\"\n\n    def __init__(self):\n        super().__init__('enhanced_publisher')\n\n        # Declare parameters with default values\n        self.declare_parameter('publish_rate', 1.0)  # Hz\n        self.declare_parameter('topic_name', 'sensor_data')\n        self.declare_parameter('sensor_type', 'temperature')\n\n        # Get parameter values\n        publish_rate = self.get_parameter('publish_rate').value\n        topic_name = self.get_parameter('topic_name').value\n        sensor_type = self.get_parameter('sensor_type').value\n\n        # Create QoS profile for reliable communication\n        qos_profile = QoSProfile(\n            reliability=ReliabilityPolicy.RELIABLE,\n            history=HistoryPolicy.KEEP_LAST,\n            depth=10\n        )\n\n        # Create publisher with QoS profile\n        self.publisher_ = self.create_publisher(String, topic_name, qos_profile)\n\n        # Calculate timer period from publish rate\n        timer_period = 1.0 / publish_rate\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n\n        # Initialize counter and sensor type\n        self.i = 0\n        self.sensor_type = sensor_type\n\n        self.get_logger().info(\n            f'Enhanced Publisher initialized: topic={topic_name}, '\n            f'rate={publish_rate}Hz, sensor_type={sensor_type}'\n        )\n\n    def timer_callback(self):\n        \"\"\"Enhanced timer callback with error handling.\"\"\"\n        try:\n            msg = String()\n\n            # Generate different message content based on sensor type\n            if self.sensor_type == 'temperature':\n                msg.data = f'{self.sensor_type.capitalize()} Reading {self.i}: {20.0 + (self.i % 10)}\xb0C'\n            elif self.sensor_type == 'humidity':\n                msg.data = f'{self.sensor_type.capitalize()} Reading {self.i}: {30.0 + (self.i % 20)}%'\n            else:\n                msg.data = f'Sensor Reading {self.i}: {self.sensor_type} value'\n\n            # Publish the message\n            self.publisher_.publish(msg)\n            self.get_logger().info(f'Published: \"{msg.data}\"')\n\n            self.i += 1\n\n        except Exception as e:\n            self.get_logger().error(f'Error in timer_callback: {str(e)}')\n\n\ndef main(args=None):\n    rclpy.init(args=args)\n\n    try:\n        enhanced_publisher = EnhancedPublisher()\n        rclpy.spin(enhanced_publisher)\n    except KeyboardInterrupt:\n        print('\\nShutting down enhanced publisher...')\n    finally:\n        if 'enhanced_publisher' in locals():\n            enhanced_publisher.destroy_node()\n        rclpy.shutdown()\n\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,t.jsx)(n.p,{children:"This enhanced publisher demonstrates several advanced features:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Parameter declaration and usage"}),"\n",(0,t.jsx)(n.li,{children:"Quality of Service (QoS) profiles"}),"\n",(0,t.jsx)(n.li,{children:"Error handling in callbacks"}),"\n",(0,t.jsx)(n.li,{children:"Configurable message content"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"your-first-subscriber-node",children:"Your First Subscriber Node"}),"\n",(0,t.jsx)(n.p,{children:"Now that you understand how to create publisher nodes, let's create your first subscriber node. A subscriber node receives messages from a topic and processes them according to your application logic."}),"\n",(0,t.jsx)(n.h3,{id:"understanding-subscription-callbacks",children:"Understanding Subscription Callbacks"}),"\n",(0,t.jsx)(n.p,{children:"In ROS 2, subscribers work by registering a callback function that gets called whenever a new message arrives on the subscribed topic. The callback function receives the message as a parameter and can process it as needed."}),"\n",(0,t.jsx)(n.h3,{id:"creating-subscribers-with-create_subscription",children:"Creating Subscribers with create_subscription()"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"create_subscription()"})," method creates a subscriber that listens to messages on a specific topic. It takes four main parameters:"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Message type"}),": The type of message to expect (e.g., ",(0,t.jsx)(n.code,{children:"String"}),", ",(0,t.jsx)(n.code,{children:"Int32"}),", ",(0,t.jsx)(n.code,{children:"Float64"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Topic name"}),": The name of the topic to subscribe to"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Callback function"}),": The function to call when a message arrives"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Queue size"}),": The size of the message queue for this subscriber"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"self.subscription = self.create_subscription(\n    String,\n    'topic',\n    self.listener_callback,\n    10)\n"})}),"\n",(0,t.jsx)(n.h3,{id:"processing-received-messages",children:"Processing Received Messages"}),"\n",(0,t.jsxs)(n.p,{children:["The callback function receives the message as a parameter and can access its contents. For a ",(0,t.jsx)(n.code,{children:"String"})," message, you would access the data with ",(0,t.jsx)(n.code,{children:"msg.data"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"complete-subscriber-code-example",children:"Complete Subscriber Code Example"}),"\n",(0,t.jsxs)(n.p,{children:["Create the file ",(0,t.jsx)(n.code,{children:"~/ros2_workspace/src/my_first_ros2_pkg/my_first_ros2_pkg/subscriber_member_function.py"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'#!/usr/bin/env python3\n"""\nSubscriber Node Example\n\nThis node demonstrates how to create a subscriber that receives messages\nfrom a topic. It processes the received sensor data and logs the information.\n"""\n\nimport rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\n\nclass SensorSubscriber(Node):\n    """\n    A ROS 2 subscriber node that receives and processes sensor data.\n\n    This node subscribes to the \'sensor_data\' topic and processes incoming\n    messages. It demonstrates the basic pattern for receiving and handling\n    messages in ROS 2.\n    """\n\n    def __init__(self):\n        """\n        Initialize the subscriber node.\n\n        Creates a subscription and sets up the callback function.\n        """\n        # Call the parent class constructor and give the node a name\n        super().__init__(\'sensor_subscriber\')\n\n        # Create a subscription to the \'sensor_data\' topic\n        # When a message arrives, the listener_callback function will be called\n        self.subscription = self.create_subscription(\n            String,\n            \'sensor_data\',\n            self.listener_callback,\n            10)  # Queue size of 10 messages\n\n        # Ensure the subscription is active by not allowing it to be garbage collected\n        self.subscription  # prevent unused variable warning\n\n        # Log a message indicating the node has started\n        self.get_logger().info(\'Sensor Subscriber node initialized\')\n\n    def listener_callback(self, msg):\n        """\n        Callback function that processes incoming messages.\n\n        This function is called whenever a new message arrives on the subscribed topic.\n\n        Args:\n            msg: The received message of type String\n        """\n        # Log the received message\n        self.get_logger().info(f\'Received: "{msg.data}"\')\n\n        # You can process the message data here\n        # For example, parse the sensor data and extract values\n        self.process_sensor_data(msg.data)\n\n    def process_sensor_data(self, sensor_string):\n        """\n        Process the sensor data string and extract meaningful information.\n\n        Args:\n            sensor_string: The raw sensor data string\n        """\n        try:\n            # Extract information from the sensor string\n            # This is a simple example - in real applications, you might parse\n            # JSON, CSV, or other structured data formats\n            if \'Temperature=\' in sensor_string:\n                # Find temperature value in the string\n                temp_start = sensor_string.find(\'Temperature=\') + len(\'Temperature=\')\n                temp_end = sensor_string.find(\'\xb0C\', temp_start)\n                temperature = float(sensor_string[temp_start:temp_end])\n\n                # Log temperature and check for unusual values\n                if temperature > 30.0:\n                    self.get_logger().warn(f\'High temperature detected: {temperature}\xb0C\')\n                elif temperature < 15.0:\n                    self.get_logger().warn(f\'Low temperature detected: {temperature}\xb0C\')\n                else:\n                    self.get_logger().info(f\'Temperature is normal: {temperature}\xb0C\')\n\n        except (ValueError, IndexError) as e:\n            self.get_logger().error(f\'Error parsing sensor data: {str(e)}\')\n        except Exception as e:\n            self.get_logger().error(f\'Unexpected error processing sensor data: {str(e)}\')\n\n\ndef main(args=None):\n    """\n    Main function to run the subscriber node.\n\n    Initializes the ROS 2 communication, creates the subscriber node,\n    runs it until interrupted, and properly shuts down.\n    """\n    # Initialize the ROS 2 communication\n    rclpy.init(args=args)\n\n    # Create the subscriber node\n    sensor_subscriber = SensorSubscriber()\n\n    try:\n        # Keep the node running until interrupted (Ctrl+C)\n        rclpy.spin(sensor_subscriber)\n    except KeyboardInterrupt:\n        # Handle graceful shutdown when Ctrl+C is pressed\n        sensor_subscriber.get_logger().info(\'Interrupted by user, shutting down...\')\n    finally:\n        # Clean up resources\n        sensor_subscriber.destroy_node()\n        rclpy.shutdown()\n\n\nif __name__ == \'__main__\':\n    main()\n'})}),"\n",(0,t.jsx)(n.h3,{id:"running-publisher-and-subscriber-together",children:"Running Publisher and Subscriber Together"}),"\n",(0,t.jsx)(n.p,{children:"To see the publisher and subscriber working together, open two terminal windows:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Terminal 1 (Publisher):"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_workspace\nsource install/setup.bash\nros2 run my_first_ros2_pkg talker\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Terminal 2 (Subscriber):"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_workspace\nsource install/setup.bash\nros2 run my_first_ros2_pkg listener\n"})}),"\n",(0,t.jsx)(n.p,{children:"You should see the publisher sending messages and the subscriber receiving them:"}),"\n",(0,t.jsx)(n.p,{children:"Publisher output:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'[INFO] [1699123456.789012]: Sensor Publisher node initialized\n[INFO] [1699123457.289012]: Publishing: "Sensor Reading 0: Temperature=23.5\xb0C, Humidity=45.2%, Pressure=1013.25 hPa"\n'})}),"\n",(0,t.jsx)(n.p,{children:"Subscriber output:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'[INFO] [1699123456.789012]: Sensor Subscriber node initialized\n[INFO] [1699123457.289012]: Received: "Sensor Reading 0: Temperature=23.5\xb0C, Humidity=45.2%, Pressure=1013.25 hPa"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"advanced-subscriber-with-multiple-topic-handling",children:"Advanced Subscriber with Multiple Topic Handling"}),"\n",(0,t.jsx)(n.p,{children:"Here's a more advanced subscriber that can handle multiple topics:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'#!/usr/bin/env python3\n"""\nAdvanced Subscriber Node\n\nThis node demonstrates how to subscribe to multiple topics\nand handle different types of messages in a single node.\n"""\n\nimport rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String, Int32, Float64\n\n\nclass AdvancedSubscriber(Node):\n    """\n    An advanced subscriber that handles multiple topics.\n    """\n\n    def __init__(self):\n        super().__init__(\'advanced_subscriber\')\n\n        # Subscribe to sensor data topic\n        self.sensor_subscription = self.create_subscription(\n            String,\n            \'sensor_data\',\n            self.sensor_callback,\n            10)\n\n        # Subscribe to counter topic\n        self.counter_subscription = self.create_subscription(\n            Int32,\n            \'counter\',\n            self.counter_callback,\n            10)\n\n        # Subscribe to value topic\n        self.value_subscription = self.create_subscription(\n            Float64,\n            \'value\',\n            self.value_callback,\n            10)\n\n        self.get_logger().info(\'Advanced Subscriber initialized and listening to multiple topics\')\n\n    def sensor_callback(self, msg):\n        """Handle sensor data messages."""\n        self.get_logger().info(f\'[SENSOR] Received: "{msg.data}"\')\n\n    def counter_callback(self, msg):\n        """Handle counter messages."""\n        self.get_logger().info(f\'[COUNTER] Received value: {msg.data}\')\n\n    def value_callback(self, msg):\n        """Handle value messages."""\n        self.get_logger().info(f\'[VALUE] Received: {msg.data:.2f}\')\n\n\ndef main(args=None):\n    rclpy.init(args=args)\n\n    try:\n        advanced_subscriber = AdvancedSubscriber()\n        rclpy.spin(advanced_subscriber)\n    except KeyboardInterrupt:\n        print(\'\\nShutting down advanced subscriber...\')\n    finally:\n        if \'advanced_subscriber\' in locals():\n            advanced_subscriber.destroy_node()\n        rclpy.shutdown()\n\n\nif __name__ == \'__main__\':\n    main()\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Don't forget to add this node to your ",(0,t.jsx)(n.code,{children:"setup.py"})," entry points:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"entry_points={\n    'console_scripts': [\n        'talker = my_first_ros2_pkg.publisher_member_function:main',\n        'listener = my_first_ros2_pkg.subscriber_member_function:main',\n        'advanced_listener = my_first_ros2_pkg.advanced_subscriber:main',\n    ],\n},\n"})}),"\n",(0,t.jsx)(n.h2,{id:"debugging-and-troubleshooting",children:"Debugging and Troubleshooting"}),"\n",(0,t.jsx)(n.p,{children:"Debugging ROS 2 nodes is an essential skill for any ROS developer. This section covers common issues you might encounter and how to resolve them."}),"\n",(0,t.jsx)(n.h3,{id:"common-errors-and-their-solutions",children:"Common Errors and Their Solutions"}),"\n",(0,t.jsx)(n.h4,{id:"1-node-not-found-error",children:"1. Node Not Found Error"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Problem"}),": ",(0,t.jsx)(n.code,{children:"ros2 run package_name node_name"}),' returns "command not found"\n',(0,t.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Ensure you've built your workspace: ",(0,t.jsx)(n.code,{children:"colcon build"})]}),"\n",(0,t.jsxs)(n.li,{children:["Source the setup file: ",(0,t.jsx)(n.code,{children:"source install/setup.bash"})]}),"\n",(0,t.jsxs)(n.li,{children:["Verify the node is listed in your ",(0,t.jsx)(n.code,{children:"setup.py"})," entry_points"]}),"\n",(0,t.jsx)(n.li,{children:"Check that the function name matches the entry point definition"}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"2-topic-communication-issues",children:"2. Topic Communication Issues"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Problem"}),": Publisher and subscriber don't communicate\n",(0,t.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Verify both nodes are using the same topic name"}),"\n",(0,t.jsx)(n.li,{children:"Check that message types match between publisher and subscriber"}),"\n",(0,t.jsx)(n.li,{children:"Ensure both nodes are running simultaneously"}),"\n",(0,t.jsx)(n.li,{children:"Verify QoS profiles are compatible (if using custom QoS)"}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"3-import-errors",children:"3. Import Errors"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Problem"}),": \"No module named 'rclpy'\" or \"No module named 'std_msgs'\"\n",(0,t.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Ensure ROS 2 Humble is properly installed"}),"\n",(0,t.jsxs)(n.li,{children:["Source the ROS 2 setup file: ",(0,t.jsx)(n.code,{children:"source /opt/ros/humble/setup.bash"})]}),"\n",(0,t.jsxs)(n.li,{children:["Check that your package dependencies are declared in ",(0,t.jsx)(n.code,{children:"package.xml"})]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"using-ros2-topic-commands",children:"Using ros2 topic Commands"}),"\n",(0,t.jsx)(n.p,{children:"ROS 2 provides several useful command-line tools for debugging topic communication:"}),"\n",(0,t.jsx)(n.h4,{id:"check-available-topics",children:"Check Available Topics"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"ros2 topic list\n"})}),"\n",(0,t.jsx)(n.p,{children:"This shows all currently available topics in the ROS 2 system."}),"\n",(0,t.jsx)(n.h4,{id:"echo-messages-on-a-topic",children:"Echo Messages on a Topic"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"ros2 topic echo /sensor_data\n"})}),"\n",(0,t.jsx)(n.p,{children:"This displays all messages published to the specified topic in real-time, which is very useful for debugging."}),"\n",(0,t.jsx)(n.h4,{id:"check-topic-information",children:"Check Topic Information"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"ros2 topic info /sensor_data\n"})}),"\n",(0,t.jsx)(n.p,{children:"This shows information about the topic, including who is publishing and subscribing to it."}),"\n",(0,t.jsx)(n.h4,{id:"publish-messages-manually",children:"Publish Messages Manually"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"ros2 topic pub /sensor_data std_msgs/String \"data: 'Manual message'\"\n"})}),"\n",(0,t.jsx)(n.p,{children:"This allows you to manually publish messages to test subscribers."}),"\n",(0,t.jsx)(n.h3,{id:"using-ros2-node-commands",children:"Using ros2 node Commands"}),"\n",(0,t.jsx)(n.h4,{id:"list-running-nodes",children:"List Running Nodes"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"ros2 node list\n"})}),"\n",(0,t.jsx)(n.p,{children:"This shows all currently running ROS 2 nodes."}),"\n",(0,t.jsx)(n.h4,{id:"get-node-information",children:"Get Node Information"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"ros2 node info /sensor_publisher\n"})}),"\n",(0,t.jsx)(n.p,{children:"This shows detailed information about a specific node, including its publishers, subscribers, services, and parameters."}),"\n",(0,t.jsx)(n.h3,{id:"topic-introspection-tools",children:"Topic Introspection Tools"}),"\n",(0,t.jsx)(n.p,{children:"ROS 2 provides several tools for inspecting the communication between nodes:"}),"\n",(0,t.jsx)(n.h4,{id:"check-topic-type",children:"Check Topic Type"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"ros2 topic type /sensor_data\n"})}),"\n",(0,t.jsxs)(n.p,{children:["This shows the message type used by the topic (e.g., ",(0,t.jsx)(n.code,{children:"std_msgs/msg/String"}),")."]}),"\n",(0,t.jsx)(n.h4,{id:"get-topic-endpoint-information",children:"Get Topic Endpoint Information"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"ros2 topic info /sensor_data --verbose\n"})}),"\n",(0,t.jsx)(n.p,{children:"This provides detailed information about publishers and subscribers to the topic."}),"\n",(0,t.jsx)(n.h3,{id:"troubleshooting-connection-issues",children:"Troubleshooting Connection Issues"}),"\n",(0,t.jsx)(n.h4,{id:"network-communication-problems",children:"Network Communication Problems"}),"\n",(0,t.jsx)(n.p,{children:"If you're working in a distributed environment or with multiple machines:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Check ROS_DOMAIN_ID"}),": Ensure all machines are using the same domain ID"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"echo $ROS_DOMAIN_ID\nexport ROS_DOMAIN_ID=0  # Set to the same value on all machines\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Verify Network Configuration"}),": Ensure multicast traffic is allowed between machines"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Check Firewall Settings"}),": Ensure necessary ports are open for DDS communication"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"permission-issues",children:"Permission Issues"}),"\n",(0,t.jsx)(n.p,{children:"If you encounter permission errors:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Ensure you have write access to your workspace directory"}),"\n",(0,t.jsx)(n.li,{children:"Check that ROS 2 installation has proper permissions"}),"\n",(0,t.jsx)(n.li,{children:"Verify user is in the correct groups (if applicable)"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"debugging-code-examples",children:"Debugging Code Examples"}),"\n",(0,t.jsx)(n.p,{children:"Here are some debugging techniques you can add to your nodes:"}),"\n",(0,t.jsx)(n.h4,{id:"adding-debug-logging",children:"Adding Debug Logging"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"def timer_callback(self):\n    self.get_logger().debug('Timer callback triggered')  # Debug level\n    self.get_logger().info('Publishing message')         # Info level\n    self.get_logger().warn('Warning message')            # Warning level\n    self.get_logger().error('Error message')             # Error level\n    self.get_logger().fatal('Fatal error')               # Fatal level\n"})}),"\n",(0,t.jsx)(n.h4,{id:"checking-node-status",children:"Checking Node Status"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"def check_node_status(self):\n    \"\"\"Check if node is still active and responding.\"\"\"\n    try:\n        # Perform some internal checks\n        if hasattr(self, 'publisher_'):\n            self.get_logger().info('Publisher is active')\n        if hasattr(self, 'subscription'):\n            self.get_logger().info('Subscription is active')\n    except Exception as e:\n        self.get_logger().error(f'Node status check failed: {str(e)}')\n"})}),"\n",(0,t.jsx)(n.h4,{id:"message-validation",children:"Message Validation"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"def listener_callback(self, msg):\n    \"\"\"Validate received message before processing.\"\"\"\n    if msg is None:\n        self.get_logger().error('Received None message')\n        return\n\n    if not hasattr(msg, 'data'):\n        self.get_logger().error('Message has no data attribute')\n        return\n\n    if not isinstance(msg.data, str):\n        self.get_logger().error(f'Expected string data, got {type(msg.data)}')\n        return\n\n    # Process the validated message\n    self.get_logger().info(f'Valid message received: {msg.data}')\n"})}),"\n",(0,t.jsx)(n.h3,{id:"common-debugging-workflow",children:"Common Debugging Workflow"}),"\n",(0,t.jsx)(n.p,{children:"Here's a systematic approach to debugging ROS 2 nodes:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Check if nodes are running"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"ros2 node list\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Verify topic connections"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"ros2 topic list\nros2 topic info /your_topic_name\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Monitor message flow"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"ros2 topic echo /your_topic_name\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Check message types"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"ros2 topic type /your_topic_name\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Test with manual publishing"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'ros2 topic pub /your_topic_name your_message_type "your_message_data"\n'})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Add logging to your code"})," to track execution flow"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Use debugging tools"})," like ",(0,t.jsx)(n.code,{children:"rqt_graph"})," to visualize the node graph:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"rqt_graph\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"chapter-summary-and-next-steps",children:"Chapter Summary and Next Steps"}),"\n",(0,t.jsx)(n.p,{children:"In this chapter, you've successfully built your first ROS 2 publisher and subscriber nodes using Python. You've learned the fundamental concepts of ROS 2 communication and gained hands-on experience with the practical implementation of these concepts."}),"\n",(0,t.jsx)(n.h3,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Workspace Structure"}),": You learned how to create proper ROS 2 workspaces and packages with the correct directory structure and configuration files."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Node Creation"}),": You mastered the creation of ROS 2 nodes by inheriting from the ",(0,t.jsx)(n.code,{children:"Node"})," class and implementing the necessary initialization and communication patterns."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Publisher Implementation"}),": You created publisher nodes that send messages to topics using ",(0,t.jsx)(n.code,{children:"create_publisher()"})," and timer callbacks for periodic publishing."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Subscriber Implementation"}),": You built subscriber nodes that receive messages using ",(0,t.jsx)(n.code,{children:"create_subscription()"})," and callback functions for message processing."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Package Configuration"}),": You understood how to configure ",(0,t.jsx)(n.code,{children:"package.xml"})," and ",(0,t.jsx)(n.code,{children:"setup.py"})," files to properly declare dependencies and executable entry points."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Debugging Techniques"}),": You learned essential debugging tools and techniques for troubleshooting ROS 2 communication issues."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"what-you-can-do-now",children:"What You Can Do Now"}),"\n",(0,t.jsx)(n.p,{children:"With the knowledge from this chapter, you can:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Create ROS 2 packages from scratch using ",(0,t.jsx)(n.code,{children:"ament_python"})]}),"\n",(0,t.jsx)(n.li,{children:"Build publisher nodes that send various types of messages"}),"\n",(0,t.jsx)(n.li,{children:"Create subscriber nodes that process incoming data"}),"\n",(0,t.jsx)(n.li,{children:"Configure nodes with parameters and proper error handling"}),"\n",(0,t.jsx)(n.li,{children:"Debug basic communication issues between nodes"}),"\n",(0,t.jsx)(n.li,{children:"Run multiple nodes and observe their interactions"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"preview-of-next-chapter",children:"Preview of Next Chapter"}),"\n",(0,t.jsx)(n.p,{children:"In the next chapter, we'll expand on these concepts by exploring ROS 2 services and actions, which provide request-response communication patterns and goal-oriented task execution. You'll learn how to create service servers and clients, as well as action servers and clients that handle long-running tasks with feedback and status updates."}),"\n",(0,t.jsx)(n.p,{children:"We'll also cover launch files, which allow you to start multiple nodes simultaneously with a single command, making it easier to manage complex robot systems."}),"\n",(0,t.jsx)(n.h3,{id:"additional-resources-for-practice",children:"Additional Resources for Practice"}),"\n",(0,t.jsx)(n.p,{children:"To reinforce your learning, try these exercises:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Modify the Publisher"}),": Change the message content to simulate different types of sensor data (e.g., distance sensor, camera data)"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Create Multiple Publishers"}),": Build a node that publishes to multiple topics simultaneously"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Enhance the Subscriber"}),": Add data analysis features to your subscriber (e.g., calculating averages, detecting anomalies)"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Parameter Configuration"}),": Add more parameters to make your nodes configurable at runtime"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Error Handling"}),": Add more sophisticated error handling and recovery mechanisms"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"practice-projects",children:"Practice Projects"}),"\n",(0,t.jsx)(n.p,{children:"Consider building these small projects to apply your knowledge:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Temperature Monitor"}),": Create a publisher that simulates temperature readings and a subscriber that alerts when temperatures are outside normal ranges"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Data Logger"}),": Build a subscriber that logs received messages to a file for later analysis"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Message Converter"}),": Create a node that subscribes to one topic and republishes the data to another topic in a different format"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"By completing this chapter, you've established a solid foundation in ROS 2 node development. The skills you've learned here form the backbone of all ROS 2 applications, from simple sensor data processing to complex autonomous robot systems. Continue practicing with different message types and communication patterns to deepen your understanding of ROS 2's capabilities."})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(u,{...e})}):u(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>o});var r=s(6540);const t={},i=r.createContext(t);function a(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),r.createElement(i.Provider,{value:n},e.children)}},8955:(e,n,s)=>{s.d(n,{KF:()=>u});var r=s(6540),t=s(54);const i={personalizeButton:"personalizeButton_nZfh",buttonIdle:"buttonIdle_CDbp",buttonLoading:"buttonLoading_azQE",buttonSuccess:"buttonSuccess_gCb5",buttonError:"buttonError_Dnbw",loadingSpinner:"loadingSpinner_em21",spin:"spin_Qjt3",buttonIcon:"buttonIcon_ezwL",errorMessage:"errorMessage_Wpdm",retryLink:"retryLink_PQGl",personalizedContent:"personalizedContent_RgVj",personalizationBadge:"personalizationBadge_c8Ce",badgeIcon:"badgeIcon_TtV3",personalizationSummary:"personalizationSummary_Qx6r",summaryTitle:"summaryTitle_Isn6",summaryList:"summaryList_hovQ",contentText:"contentText_GkB5",buttonContainer:"buttonContainer_tgJz",tooltip:"tooltip_wLKX"};var a=s(4848);function o({content:e,personalizationSummary:n,className:s}){const[t,o]=(0,r.useState)(!1),l=e=>{let n=e.replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>");n=n.replace(/\*([^*]+)\*/g,"<em>$1</em>");const s=n.split(/(`[^`]+`)/g);return 1!==s.length||n.includes("<")?s.map((e,n)=>e.startsWith("`")&&e.endsWith("`")?(0,a.jsx)("code",{children:e.slice(1,-1)},n):e.includes("<strong>")||e.includes("<em>")?(0,a.jsx)("span",{dangerouslySetInnerHTML:{__html:e}},n):e):e};return(0,a.jsxs)("div",{className:`${i.personalizedContent} ${s||""}`,children:[(0,a.jsxs)("div",{className:i.personalizationBadge,children:[(0,a.jsxs)("svg",{className:i.badgeIcon,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,a.jsx)("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),(0,a.jsx)("circle",{cx:"12",cy:"7",r:"4"})]}),(0,a.jsx)("span",{children:"Personalized for you"}),n&&(0,a.jsx)("button",{type:"button",onClick:()=>o(!t),style:{background:"none",border:"none",cursor:"pointer",marginLeft:"0.5rem",fontSize:"0.75rem",color:"inherit",textDecoration:"underline"},"aria-expanded":t,children:t?"Hide details":"Show details"})]}),t&&n&&(c=n,(0,a.jsxs)("div",{className:i.personalizationSummary,children:[(0,a.jsx)("div",{className:i.summaryTitle,children:"Personalization Applied:"}),(0,a.jsx)("ul",{className:i.summaryList,children:c.adjustments_made.map((e,n)=>(0,a.jsx)("li",{children:e},n))})]})),(0,a.jsx)("div",{className:i.contentText,children:(e=>{const n=[];let s=0;return e.split(/(```[\s\S]*?```)/g).forEach(e=>{if(e.startsWith("```")&&e.endsWith("```")){const r=e.slice(3,-3),t=r.indexOf("\n"),i=t>0?r.slice(0,t).trim():"",o=t>0?r.slice(t+1):r;n.push((0,a.jsx)("pre",{children:(0,a.jsx)("code",{className:i?`language-${i}`:void 0,children:o})},s++))}else if(e.trim()){e.split("\n").forEach(e=>{if(e.trim()){const r=e.match(/^(#{1,6})\s+(.*)$/);if(r){const e=r[1].length,t=l(r[2]),i=`h${e}`;n.push((0,a.jsx)(i,{children:t},s++))}else if(e.match(/^[-*]\s+/)){const r=l(e.replace(/^[-*]\s+/,""));n.push((0,a.jsx)("li",{children:r},s++))}else if(e.match(/^\d+\.\s+/)){const r=l(e.replace(/^\d+\.\s+/,""));n.push((0,a.jsx)("li",{children:r},s++))}else if(e.match(/^>\s+/)){const r=l(e.replace(/^>\s+/,""));n.push((0,a.jsx)("blockquote",{children:r},s++))}else n.push((0,a.jsx)("p",{children:l(e)},s++))}})}}),n})(e)})]});var c}const l={AUTH_REQUIRED:"Please sign in to personalize content.",INVALID_REQUEST:"Personalization request was invalid. Please try again.",PROFILE_NOT_FOUND:"Please complete your profile to personalize content.",PROFILE_INCOMPLETE:"Your profile is missing some information needed for personalization.",CHAPTER_NOT_FOUND:"Chapter not found.",PERSONALIZATION_FAILED:"Personalization failed. Please try again.",RATE_LIMITED:"Too many personalization requests. Please wait and try again.",NETWORK_ERROR:"Connection error. Check your internet connection.",TIMEOUT:"Personalization timed out. Please try again."},c={PERSONALIZE:"Personalize Content",LOADING:"Personalizing...",SHOW_ORIGINAL:"Show Original",PERSONALIZE_AGAIN:"Personalize Again",RETRY:"Retry Personalization"},d={ENDPOINT:"/api/personalize",TIMEOUT_MS:9e4,BACKEND_URL:"https://shurem-ragchatbot.hf.space"};var h=s(961);function u({chapterId:e}){const{user:n,profile:s,isLoading:u}=(0,t.As)(),[p,g]=(0,r.useState)({status:"idle",personalizedContent:null,showPersonalized:!1,errorMessage:null,personalizationSummary:null}),m=(0,r.useCallback)(async()=>{if(p.personalizedContent){const e=!p.showPersonalized;return void g(n=>({...n,showPersonalized:e}))}g(e=>({...e,status:"loading",errorMessage:null}));try{console.log("[Personalization] Starting personalization for chapter:",e);let n="";const s=document.querySelector("article");if(s){const e=s.cloneNode(!0),r=e.querySelector("div:has(.personalizeButton), div:has(.translateButton)");r&&r.remove(),n=e.innerText||e.textContent||""}else{const e=document.querySelector("main")||document.querySelector("#__docusaurus");if(e){const s=e.cloneNode(!0);s.querySelectorAll("button").forEach(e=>{(e.classList.contains("personalizeButton")||e.classList.contains("translateButton"))&&e.remove()}),n=s.innerText||s.textContent||""}}const r=new AbortController,t=setTimeout(()=>r.abort(),d.TIMEOUT_MS),i=`${d.BACKEND_URL}${d.ENDPOINT}`;console.log("[Personalization] Calling API:",i),console.log("[Personalization] Content length:",n.length);const a=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chapter_id:e,chapter_content:n}),signal:r.signal});console.log("[Personalization] Response status:",a.status),clearTimeout(t);const o=await a.json();if(o.success)g({status:"success",personalizedContent:o.personalized_content,showPersonalized:!0,errorMessage:null,personalizationSummary:o.personalization_summary});else{const e=o.error,n=l[e]||o.message||"Personalization failed";g(e=>({...e,status:"error",errorMessage:n}))}}catch(n){console.error("[Personalization] Error:",n);let e=l.PERSONALIZATION_FAILED;n instanceof Error&&(console.error("[Personalization] Error name:",n.name,"Message:",n.message),"AbortError"===n.name?e=l.TIMEOUT:(n.message.includes("fetch")||n.message.includes("network"))&&(e=l.NETWORK_ERROR)),g(n=>({...n,status:"error",errorMessage:e}))}},[e,p.personalizedContent,p.showPersonalized]),b=(0,r.useCallback)(()=>{g({status:"idle",personalizedContent:null,showPersonalized:!1,errorMessage:null,personalizationSummary:null}),m()},[m]);if(u)return null;if(!n)return null;if(!function(e){if(!e)return!1;const{software_background:n,hardware_background:s}=e;return!!(n&&n.experience_level&&n.programming_languages?.length&&n.frameworks_platforms?.length&&s&&s.device_type&&s.operating_system&&s.system_capability)}(s))return null;const{status:x,showPersonalized:f,errorMessage:_}=p,y="loading"===x;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("button",{type:"button",className:`${i.personalizeButton} ${(()=>{switch(x){case"loading":return i.buttonLoading;case"success":return f?i.buttonSuccess:i.buttonIdle;case"error":return i.buttonError;default:return i.buttonIdle}})()}`,onClick:m,disabled:y,"aria-label":f?"Show original content":"Personalize content based on your profile","aria-busy":"loading"===x,title:"Adapt content to your experience level and background",children:["loading"===x?(0,a.jsx)("span",{className:i.loadingSpinner,"aria-hidden":"true"}):(0,a.jsxs)("svg",{className:i.buttonIcon,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,a.jsx)("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),(0,a.jsx)("circle",{cx:"12",cy:"7",r:"4"})]}),(0,a.jsx)("span",{children:"loading"===x?c.LOADING:"error"===x?c.RETRY:f?c.SHOW_ORIGINAL:p.personalizedContent&&!f?c.PERSONALIZE_AGAIN:c.PERSONALIZE})]}),"error"===x&&_&&(0,a.jsxs)("div",{className:i.errorMessage,role:"alert",children:[(0,a.jsx)("span",{children:_}),(0,a.jsx)("button",{type:"button",className:i.retryLink,onClick:b,"aria-label":"Retry personalization",children:"Try again"})]}),f&&p.personalizedContent&&"undefined"!=typeof document&&(()=>{const e=document.querySelector("article"),n=e?.querySelector('div[style*="flex"]');if(n){let e=document.getElementById("personalized-content-portal");return e||(e=document.createElement("div"),e.id="personalized-content-portal",e.style.cssText="width: 100%; max-width: 100%;",n.insertAdjacentElement("afterend",e)),(0,h.createPortal)((0,a.jsx)(o,{content:p.personalizedContent,personalizationSummary:p.personalizationSummary||void 0}),e)}return null})()]})}}}]);